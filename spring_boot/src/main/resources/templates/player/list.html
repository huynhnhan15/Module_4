<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Danh sách cầu thủ</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <th:block th:insert="~{/layout/layout::library}"/>
</head>
<body class="container mt-3">
<div th:replace="~{/layout/layout::header}"></div>

<div th:if="${lastViewedPlayer != null}" class="alert alert-info">
    <strong>Cầu thủ xem gần nhất:</strong>
    <img th:src="${lastViewedPlayer.avatar}" alt="avatar" width="50" height="50"
         style="border-radius: 50%; margin: 0 10px;"/>
    <span th:text="${lastViewedPlayer.name}"></span>
</div>
<div th:if="${searchHistory != null && !searchHistory.isEmpty()}" class="alert alert-warning">
    <strong> Lịch sử tìm kiếm:</strong>
    <span th:each="keyword, stat : ${searchHistory}">
        <a th:href="@{/players/search(searchName=${keyword})}"
           class="badge bg-secondary text-decoration-none"
           th:text="${keyword}"></a>
        <span th:if="!${stat.last}">, </span>
    </span>
</div>

<a href="/players/add" class="btn btn-success mb-3">Thêm cầu thủ</a>
<a th:href="@{/players/add}" class="btn btn-success mb-3">Thêm cầu thủ</a>
<form action="/players/search" method="get">
    <input name="searchName" placeholder="Nhập tên">
    <button>Tìm kiếm</button>
</form>
<p class="text-success" th:text="${mess}"></p>

<table class="table table-bordered table-striped">
    <thead class="table-dark">
    <tr>
        <th>STT</th>
        <th>ID</th>
        <th>Họ và tên</th>
        <th>Ngày sinh</th>
        <th>Kinh nghiệm</th>
        <th>Vị trí</th>
        <th>Ảnh đại diện</th>
        <th>RP-Detail</th>
        <th>PV-Detail</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="player, status : ${playerList}">
        <td th:text="${status.count}"></td>
        <td th:text="${player.id}"></td>
        <td th:text="${player.name}"></td>
        <td th:text="${player.birthday}"></td>
        <td th:text="${player.experience}"></td>
        <td th:text="${player.position}"></td>
        <td>
            <img th:src="${player.avatar}" alt="avatar" width="80" height="80"/>
        </td>
        <td>
            <a th:href="@{/players/detail/{id}(id=${player.id})}" class="btn btn-primary btn-sm">RP-Detail</a>
        </td>
        <td>
            <a th:href="@{/players/detail/__${player.id}__}" class="btn btn-secondary btn-sm">Detail</a>
        </td>
    </tr>
    </tbody>
</table>
</body>
</html>